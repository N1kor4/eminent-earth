---
import { Icon } from 'astro-icon/components';
import Link from './Link.astro';
import LangSwitcher from './LangSwitcher.astro';
import navData from '../data/navData';

const path = Astro.url.pathname; 
// assume the path starts with /en/ or /fr/
const lang = path.startsWith("/fr/") ? "fr" : "en"; 
const navItems = navData[lang];
---

<nav aria-label="Primary">
  <div class="navbar">
    <a href="/" class="logomark" aria-label="Go home">
      <Icon name="logomark" width="60" />
    </a>
    <ul>
      {navItems.map((item) => (
        <Link 
          text={item.name}
          href={item.path}
          style="primary"
          isFilled={false}
        />
      ))}

      <!-- Language switcher -->
      <li>
        <LangSwitcher />
      </li>
    </ul>
  </div>
</nav>

<script>
  import "../js/nav.js"; 
</script>

<style>
.navbar ul {
  display: flex;
  align-items: center; /* centers both text links and flag */
  gap: 1rem;
}
</style>
