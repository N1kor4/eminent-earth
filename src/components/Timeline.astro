---
const { items } = Astro.props; // items: array of { title, url, date, description }
---

<div class="timeline">
  {items.map((item, i) => {
    const side = i % 2 === 0 ? "left" : "right";
    const translateY = -5 * Math.floor(i / 2) - 2.5 * (i % 2);
    return (
      <div
        class={`timeline-item ${side}`}
        style={`transform: translateY(${translateY}rem); left: ${side === "left" ? "0" : "50%"};`}
      >
        <div class="content">
          <span class="date">{new Date(item.date).getFullYear()}</span>
          <h3>
            <a href={item.url || '#'}>{item.title}</a>
          </h3>
          <p>{item.description}</p>
          <a href={item.url || '#'} class="read-more">Learn more â†’</a>
        </div>
      </div>
    );
  })}
</div>

<style>
:root {
  /* These can be customized globally via light/dark mode support */
  --color-surface: #fff;
  --color-surface-dark: #1e1e1e;
  --color-border: #ddd;
  --color-border-dark: #333;
  --color-text: #222;
  --color-text-muted: #666;
  --accent-color: #007acc;
}

@media (prefers-color-scheme: dark) {
  :root {
    --color-surface: var(--color-surface-dark);
    --color-border: var(--color-border-dark);
    --color-text: #eee;
    --color-text-muted: #aaa;
  }
}

.timeline {
  position: relative;
  max-width: 900px;
  margin: auto;
  display: flex;
  flex-direction: column;
}
.timeline::after {
  content: '';
  position: absolute;
  width: 3px;
  background-color: var(--color-border);
  top: 0;
  bottom: 0;
  left: 50%;
  transform: translateX(-50%);
}
.timeline-item {
  display: flex;
  width: 100%;
  margin-bottom: 0.5rem;
}
.timeline-item.left {
  justify-content: flex-end;
  padding-right: 2rem;
}
.timeline-item.right {
  justify-content: flex-start;
  padding-left: 2rem;
}
.content {
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: 8px;
  padding: 1.2rem;
  transition: transform 0.2s ease, box-shadow 0.2s ease;
  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.05);
  max-width: 45%;
}
.content:hover {
  transform: translateY(-4px);
  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.08);
}
.content h3 {
  margin: 0.5rem 0 0.25rem;
  font-size: 1.1rem;
}
.content a {
  color: var(--accent-color);
  text-decoration: none;
}
.content p {
  margin: 0.5rem 0 0.75rem;
  color: var(--color-text);
}
.date {
  font-size: 0.85rem;
  color: var(--color-text-muted);
}
.read-more {
  display: inline-block;
  font-size: 0.85rem;
  color: var(--accent-color);
}
</style>
